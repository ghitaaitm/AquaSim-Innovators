AquaSim Innovators: Water Quality Simulation with Reinforcement Learning (PPO)

Overview

This NetLogo model simulates a lake ecosystem with fish and plants, where water quality impacts fish health. Environmental data is sourced from donnees_final_data.csv. 
At each simulation step, the environment state is exported to env_state.csv, a Python script (run_ppo.py) using a PPO (Proximal Policy Optimization) model generates an action in ppo_action.csv,
and this action adjusts environmental parameters to optimize water quality.

Objectives

•	Simulate the impact of water quality (temperature, oxygen, pH, etc.) on fish health.
•	Integrate a PPO reinforcement learning model to optimize environmental conditions.
•	Enable fish to seek plants to improve their health.
•	Model plant growth based on environmental conditions (e.g., oxygen, temperature).
Dependencies
•	NetLogo: Version 6.0 or higher with the CSV extension enabled (included by default).
•	Python: Version 3.7+ with the following libraries: 
o	pandas (for CSV handling)
o	stable-baselines3 (for PPO implementation)

Install them using:
               pip install pandas stable-baselines3
Input Files: 
•	donnees_final_data.csv: Initial environmental data (must be in the model directory).
•	run_ppo.py: Python script for PPO (must be provided and configured to read env_state.csv and write ppo_action.csv).
File Formats
donnees_final_data.csv
•	Columns: Temperature, Turbidity, Oxygen, CO2, Alkalinity, pH, Ammonia, Nitrite, Phosphorus, Plankton, WaterQuality.
•	Format: Numeric values can use commas (e.g., "1,5") or dots (e.g., "1.5"). Missing values must be "NA".

•	Example:
Temperature,Turbidity,Oxygen,CO2,Alkalinity,pH,Ammonia,Nitrite,Phosphorus,Plankton,WaterQuality
25.5,10,6.5,8,100,7.2,0.5,0.2,0.3,50,good
26,12,6.0,9,110,7.0,0.6,0.3,0.4,55,bad
env_state.csv
Generated by the model at each step:
•	Columns: turbidity, temperature, oxygen, alkalinity, ph, ammonia, phosphorus, plankton, nitrite, co2.
•	Example:
turbidity,temperature,oxygen,alkalinity,ph,ammonia,phosphorus,plankton,nitrite,co2
10,25.5,6.5,100,7.2,0.5,0.3,50,0.2,8
ppo_action.csv
Generated by run_ppo.py:
•	Format: Single row with an action (integer).
•	Actions: 
o	1: Reduce turbidity, ammonia, nitrite, and CO2.
o	2: Increase alkalinity and oxygen, adjust other parameters.
•	Example:
action
1
Code Structure
•	Globals: dead-fish (tracks dead fish), data-lines (CSV data), environmental parameters (e.g., temperature, oxygen).
•	Breeds: fishes (fish), plants (plants).
•	Fishes-own: health (each fish has a health variable).
•	Main Procedures: 
o	setup: Initializes the lake, fish, plants, and loads the CSV.
o	go: Runs one simulation step, updates the environment, waits for PPO action, and manages interactions.
o	update-environment: Reads CSV, exports state to env_state.csv, checks alerts.
o	wait-for-action: Waits for ppo_action.csv.
o	apply-ppo-action: Applies the PPO action to adjust parameters.
o	evaluate-environment: Calculates fish stress based on conditions.
o	search-for-plants: Fish seek plants to increase health.
o	grow-plants: Plants grow based on oxygen and temperature.
Setup Instructions
1.	Prepare the Environment: 
o	Place donnees_final_data.csv and run_ppo.py in the same directory as the .nlogo file.
o	Ensure Python is installed and run_ppo.py is functional.
2.	Install NetLogo: Download and install NetLogo (6.0+) from the official site.
3.	Configure the Interface: 
o	In NetLogo’s "Interface" tab, add: 
	Button "Setup": Command = setup, Type = "Once".
	Button "Go": Command = go, Type = "Forever".
	(Optional) Add monitors for dead-fish and plant-count.
Run the Model: 
•	Click "Setup" to initialize the lake.
•	Click "Go" to start the simulation.
•	At each tick: 
o	The state is exported to env_state.csv.
o	A prompt asks you to run python run_ppo.py in a terminal.
o	Run the command: 
                              python run_ppo.py
o	Click "OK" after running the script.
o	The model applies the action from ppo_action.csv.

Known Issues
•	Error "ppo_action.csv not created": Ensure run_ppo.py works and writes ppo_action.csv. Adjust max-wait in wait-for-action if the script takes longer than 30 seconds.
•	CSV Format Issues: Verify that donnees_final_data.csv matches the expected format (11 columns, correct decimal separators).


![Accuracy_model](https://github.com/user-attachments/assets/5e6b3775-026b-407f-b0a1-86ba0914b0fc)
![model_Result](https://github.com/user-attachments/assets/e7ca2c34-bea1-4067-a0c5-ab72393e5563)

<img width="685" alt="Simulation" src="https://github.com/user-attachments/assets/d0d4427a-2be9-4fb0-91c5-0d8be73874e7" />
